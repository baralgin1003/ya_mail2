!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}({0:function(t,e,n){"use strict";var o=n(258);!function(){function t(){o.on("wdgt.preferences.setted",e),o.on("wdgt.preferences.getted",e),o.trigger("yandex.mail.get-mailto-value")}function e(t,e){e.name===i&&(e.value=Boolean(e.value),r!==e.value&&(r=e.value,r?document.addEventListener("click",n,!0):document.removeEventListener("click",n,!0)))}function n(t){for(var e=t.target;e;){var n=!1;try{n="a"===e.localName.toLowerCase()}catch(r){}if(n){var i=e.href;"mailto:"===i.substr(0,7).toLowerCase()&&(t.preventDefault(),o.trigger("yandex.mail.compose",{url:i}));break}e=e.parentNode}}var r=!1,i="application.mail-protocol-hook";setTimeout(t,0)}()},258:function(t,e){"use strict";var n=function(){this._events=[],this.init()};n.prototype.init=function(){chrome.runtime.onMessage.addListener(this._messageHandler.bind(this))},n.prototype.trigger=function(t,e,n,o){var r={topic:t,data:e,options:n,nano:!0};o?chrome.runtime.sendMessage(r,o):chrome.runtime.sendMessage(r)},n.prototype.on=function(t,e,n,o){this._events.push({topic:t,handler:e,ctx:n,once:o,mute:!1})},n.prototype.off=function(t,e){this._events=this._events.filter(function(n){return n.topic!==t||n.handler!==e})},n.prototype.ignoreEvent=function(t){this._events=this._events.filter(function(e){return e.topic!==t})},n.prototype.once=function(t,e,n){this.on(t,e,n,!0)},n.prototype.flush=function(){this._events=[]},n.prototype.willTrigger=function(t){return this._events.some(function(e){return e.topic===t})},n.prototype.hasListener=function(t,e){return this._events.some(function(n){return n.topic===t&&n.handler===e})},n.prototype._messageHandler=function(t,e,n){if(t.topic)return t.options=t.options||{},t.options.sendResponse=n,this._internalTrigger(t.topic,t.data,t.options),Boolean(t.options.asyncResponse)},n.prototype._internalTrigger=function(t,e,n){var o=[];this._events=this._events.filter(function(e){return e.topic!==t||(o.push(e),!e.once)}),o.forEach(function(o){o.handler.call(o.ctx,t,e,n)})},t.exports=new n}});